import{r as m,u as R,a as t,j as x,t as h,b as q,F as z,H as G}from"./app.f589c3f2.js";import{j as k,_ as J,M as Q}from"./Main.6517ce02.js";import{L as A}from"./Label.7a4bd3af.js";import{T as U}from"./TextArea.349da36e.js";import{B as X}from"./Button.139d90bc.js";import{p as Y}from"./Helper.3dc4eb83.js";import{l as C}from"./lodash.f68fe754.js";import{a as Z,e as F,v as ee,b as H,g as ae,f as te,u as oe,S as re}from"./Select-54ac8379.esm.1a1ef687.js";import{a as ne}from"./index.fe752647.js";import"./whatsapp.daf8657a.js";import"./Modal.2632ccec.js";import"./index.4862930d.js";var ie=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],B=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=String(e).toLowerCase(),n=String(r.getOptionValue(o)).toLowerCase(),u=String(r.getOptionLabel(o)).toLowerCase();return n===i||u===i},P={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,o,r,i){return!(!e||o.some(function(n){return B(e,n,i)})||r.some(function(n){return B(e,n,i)}))},getNewOptionData:function(e,o){return{label:o,value:e,__isNew__:!0}}};function se(a){var e=a.allowCreateWhileLoading,o=e===void 0?!1:e,r=a.createOptionPosition,i=r===void 0?"last":r,n=a.formatCreateLabel,u=n===void 0?P.formatCreateLabel:n,f=a.isValidNewOption,s=f===void 0?P.isValidNewOption:f,y=a.getNewOptionData,v=y===void 0?P.getNewOptionData:y,N=a.onCreateOption,$=a.options,c=$===void 0?[]:$,b=a.onChange,l=Z(a,ie),S=l.getOptionValue,M=S===void 0?ae:S,V=l.getOptionLabel,j=V===void 0?te:V,p=l.inputValue,_=l.isLoading,T=l.isMulti,O=l.value,W=l.name,d=m.exports.useMemo(function(){return s(p,F(O),c,{getOptionValue:M,getOptionLabel:j})?v(p,u(p)):void 0},[u,v,j,M,p,s,c,O]),E=m.exports.useMemo(function(){return(o||!_)&&d?i==="first"?[d].concat(k(c)):[].concat(k(c),[d]):c},[o,i,_,d,c]),K=m.exports.useCallback(function(g,w){if(w.action!=="select-option")return b(g,w);var D=Array.isArray(g)?g:[g];if(D[D.length-1]===d){if(N)N(p);else{var L=v(p,p),I={action:"create-option",name:W,option:L};b(ee(T,[].concat(k(F(O)),[L]),L),I)}return}b(g,w)},[v,p,T,W,d,N,b,O]);return H(H({},l),{},{options:E,onChange:K})}var le=m.exports.forwardRef(function(a,e){var o=oe(a),r=se(o);return m.exports.createElement(re,J({ref:e},r))});function pe({customers:a}){const{data:e,setData:o,reset:r}=R({phone:"",text:""}),[i,n]=m.exports.useState(!1),u=s=>{o({...e,[s.target.name]:s.target.value})},f=()=>{if(C.exports.isEmpty(e.phone)){h.info("Masukkan no tujuan...");return}else if(C.exports.isEmpty(e.text)){h.info("Masukkan isi pesan");return}else if(!C.exports.isNumber(C.exports.toNumber(e.phone))){h.info("No. Tujuan tidak valid");return}n(!0),ne.post(route("whatsapp.sendMessage"),{to:Y(e.phone),text:e.text}).then(({data:s})=>{h.success("Pesan berhasil dikirim..."),r()}).catch(()=>{h.error("Pesan gagal dikirim. silahkan coba lagi.")}).finally(()=>{n(!1)})};return t("div",{className:"card bg-white dark:bg-slate-900 shadow-md",children:x("div",{className:"card-body py-9 px-5",children:[t("div",{className:"card-title text-slate-600",children:"Kirim Whatsapp"}),x("div",{children:[t(A,{children:"No. Tujuan"}),t(le,{isClearable:!0,options:a,noOptionsMessage:()=>"Tidak ada pilihan",placeholder:"Pilih Tujuan...",onChange:s=>o({...e,phone:s.value}),formatCreateLabel:s=>"[ Tambah Baru ...] "+s})]}),x("div",{className:"",children:[t(A,{children:"Pesan"}),t(U,{name:"text",value:e.text,className:"textarea-bordered h-48",handleChange:u,placeHolder:"Masukkan pesan whatsapp yang akan dikirim"})]}),t("div",{className:"text-right mt-2",children:t(X,{handleClick:f,type:"button",className:"btn-success",processing:i,children:"Kirim"})})]})})}const ue=()=>{const{data:a}=q().props;return x(z,{children:[t(G,{children:t("title",{children:"Kirim pesan whastapp"})}),t("div",{className:"shadow p-4 mb-6",children:t("h2",{className:"font-semibold text-slate-600",children:"Whatsapp"})}),t("div",{className:"my-8 px-4",children:t(pe,{customers:a.customers})})]})};ue.layout=a=>t(Q,{children:a});export{ue as default};
