import{E as T}from"./Empty.bbc113d4.js";import{H as I}from"./Header.35c65b5b.js";import{M as g}from"./Modal.e6bcdf41.js";import{M as C}from"./Main.9307f910.js";import{b as M,j as u,F as k,a as s,H as U,L as _,e as N}from"./app.c1c63f6b.js";import{_ as b}from"./lodash.3415c301.js";import{r as y,t as H,f as Y,i as j}from"./index.2b454c40.js";import"./whatsapp.71296d18.js";import"./Helper.8baa06dc.js";var D=6e4,x=36e5;function O(a,e){var t;y(1,arguments);var r=H((t=e==null?void 0:e.additionalDigits)!==null&&t!==void 0?t:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof a=="string"||Object.prototype.toString.call(a)==="[object String]"))return new Date(NaN);var n=$(a),i;if(n.date){var l=R(n.date,r);i=Z(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var d=i.getTime(),o=0,m;if(n.time&&(o=E(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(m=W(n.timezone),isNaN(m))return new Date(NaN)}else{var c=new Date(d+o),h=new Date(0);return h.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),h.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),h}return new Date(d+o+m)}var p={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},z=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,F=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,S=/^([+-])(\d{2})(?::?(\d{2}))?$/;function $(a){var e={},t=a.split(p.dateTimeDelimiter),r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],p.timeZoneDelimiter.test(e.date)&&(e.date=a.split(p.timeZoneDelimiter)[0],r=a.substr(e.date.length,a.length))),r){var n=p.timezone.exec(r);n?(e.time=r.replace(n[1],""),e.timezone=n[1]):e.time=r}return e}function R(a,e){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=a.match(t);if(!r)return{year:NaN,restDateString:""};var n=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?n:i*100,restDateString:a.slice((r[1]||r[2]).length)}}function Z(a,e){if(e===null)return new Date(NaN);var t=a.match(z);if(!t)return new Date(NaN);var r=!!t[4],n=f(t[1]),i=f(t[2])-1,l=f(t[3]),d=f(t[4]),o=f(t[5])-1;if(r)return G(e,d,o)?B(e,d,o):new Date(NaN);var m=new Date(0);return!L(e,i,l)||!q(e,n)?new Date(NaN):(m.setUTCFullYear(e,i,Math.max(n,l)),m)}function f(a){return a?parseInt(a):1}function E(a){var e=a.match(F);if(!e)return NaN;var t=v(e[1]),r=v(e[2]),n=v(e[3]);return J(t,r,n)?t*x+r*D+n*1e3:NaN}function v(a){return a&&parseFloat(a.replace(",","."))||0}function W(a){if(a==="Z")return 0;var e=a.match(S);if(!e)return 0;var t=e[1]==="+"?-1:1,r=parseInt(e[2]),n=e[3]&&parseInt(e[3])||0;return P(r,n)?t*(r*x+n*D):NaN}function B(a,e,t){var r=new Date(0);r.setUTCFullYear(a,0,4);var n=r.getUTCDay()||7,i=(e-1)*7+t+1-n;return r.setUTCDate(r.getUTCDate()+i),r}var A=[31,null,31,30,31,30,31,31,30,31,30,31];function w(a){return a%400===0||a%4===0&&a%100!==0}function L(a,e,t){return e>=0&&e<=11&&t>=1&&t<=(A[e]||(w(a)?29:28))}function q(a,e){return e>=1&&e<=(w(a)?366:365)}function G(a,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function J(a,e,t){return a===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&a>=0&&a<25}function P(a,e){return e>=0&&e<=59}const K=()=>{const{notifications:a}=M().props,e=(i,l="dd MMM")=>{let d=O(i);return Y(d,l,{locale:j})},t=b.groupBy(a.all,i=>e(i.created_at)),r=()=>{N.Inertia.post(route("notification.read_all"))},n=()=>{N.Inertia.delete(route("notification.delete"))};return u(k,{children:[s(U,{children:s("title",{children:"Notifikasi"})}),s(I,{children:u("div",{className:"flex  justify-between md:items-center items-center",children:["Notifikasi",u("div",{className:"space-x-2",children:[a.all.length>0&&s("a",{href:"#modal_clear",className:"btn btn-sm rounded btn-ghost shadow-none text-error",children:"Clear"}),a.unread.length>0&&s("a",{href:"#modal_read_all",className:"btn btn-sm rounded btn-ghost shadow-none text-warning",children:"Read All"})]})]})}),a.all.length==0&&s(T,{}),Object.keys(t).map(i=>s("div",{className:"mb-1",children:u("div",{className:"px-4 ",children:[s("h6",{className:"font-semibold ml-1 md:text-lg",children:i}),t[i].map((l,d)=>{let o=b.isEmpty(l.read_at)?"bg-amber-100 dark:bg-slate-800":"bg-white dark:bg-slate-700";return u(_,{href:route("notification.read",l.id),data:{url:l.data.url},method:"post",className:"py-2 ",children:[s("p",{className:`shadow text-[14px] p-4 border-2 rounded-lg leading-relaxed ${o} cursor-pointer`,children:l.data.body}),s("div",{className:"text-[13px] opacity-60 ml-1 pt-1 pb-2",children:e(l.created_at,"dd MMM, HH:mm")})]},d)})]})},i)),s(g,{id:"modal_read_all",title:"Informasi!",message:" Tandai semua notifikasi menjadi sudah dibaca ?",children:u("div",{children:[s("a",{href:"#",className:"btn btn-link text-neutral dark:text-white",children:"Batal"}),s("a",{href:"#",className:"btn btn-success btn-sm rounded ",onClick:r,children:"Ya, Tandai semua!"})]})}),s(g,{id:"modal_clear",title:"Info!",message:"Hapus semua notifikasi ?",children:u("div",{children:[s("a",{href:"#",className:"btn btn-link text-neutral dark:text-white",children:"Batal"}),s("a",{href:"#",className:"btn btn-success btn-sm rounded ",onClick:n,children:"Ya, Hapus semua!"})]})})]})};K.layout=a=>s(C,{children:a});export{K as default};
