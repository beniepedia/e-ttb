import{B as T}from"./Button.c994cb4b.js";import{I as j}from"./Input.3c40d9dd.js";import{r as m,j as r,a as e,F as b,H as S}from"./app.7e5fa4d6.js";import{f as w,i as O}from"./index.19391a32.js";import{G as E}from"./Guest.125c5dd1.js";import{a as k}from"./index.fefb1b11.js";import{P as h,A as M,t as g}from"./Alert.efc22e59.js";import{W as P}from"./whatsapp.500f587b.js";import"./axios.cd6af229.js";var z=["color","size","title"];function C(a,t){if(a==null)return{};var n=I(a,t),l,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);for(i=0;i<s.length;i++)l=s[i],!(t.indexOf(l)>=0)&&(!Object.prototype.propertyIsEnumerable.call(a,l)||(n[l]=a[l]))}return n}function I(a,t){if(a==null)return{};var n={},l=Object.keys(a),i,s;for(s=0;s<l.length;s++)i=l[s],!(t.indexOf(i)>=0)&&(n[i]=a[i]);return n}var v=m.exports.forwardRef(function(a,t){var n=a.color,l=a.size,i=a.title,s=C(a,z);return r("svg",{ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:l,height:l,fill:n,...s,children:[i?e("title",{children:i}):null,e("path",{d:"M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.568 17.568 0 0 0 4.168 6.608 17.569 17.569 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.678.678 0 0 0-.58-.122l-2.19.547a1.745 1.745 0 0 1-1.657-.459L5.482 8.062a1.745 1.745 0 0 1-.46-1.657l.548-2.19a.678.678 0 0 0-.122-.58L3.654 1.328zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z"})]})});v.propTypes={color:h.string,size:h.oneOfType([h.string,h.number]),title:h.string};v.defaultProps={color:"currentColor",size:"1em",title:null};var L=v;const _=({...a})=>{const t=a;console.log(t);const n=t.image.substring(t.image.lastIndexOf("/")+1,t.image.lastIndexOf("."));return r(b,{children:[e("div",{className:"overflow-x-auto",children:e("table",{className:"table table-compact w-full ",children:r("tbody",{children:[r("tr",{children:[e("th",{children:"No. Register"}),e("th",{children:":"}),e("td",{children:t.receipt_code})]}),r("tr",{children:[e("th",{children:"No. Kartu"}),e("th",{children:":"}),e("td",{children:t.receipt_number})]}),r("tr",{children:[e("th",{children:"Customer"}),e("th",{children:":"}),e("td",{children:t.customer.name})]}),r("tr",{children:[e("th",{children:"Tgl Masuk"}),e("th",{children:":"}),e("td",{children:w(new Date(t.delivery_date),"EEEE, dd MMMM yyyy",{locale:O})})]}),r("tr",{children:[e("th",{children:"Jam"}),e("th",{children:":"}),e("td",{children:w(new Date(t.delivery_date),"HH:mm")})]}),r("tr",{children:[e("th",{children:"Jenis & Type"}),e("th",{children:":"}),r("td",{className:"capitalize",children:[t.category," - ",t.barang]})]}),r("tr",{children:[e("th",{children:"Kerusakan"}),e("th",{children:":"}),e("td",{children:t.kerusakan})]}),r("tr",{children:[e("th",{children:"Kelengkapan"}),e("th",{children:":"}),e("td",{children:t.kelengkapan?t.kelengkapan.join(" | "):"-"})]}),r("tr",{children:[e("th",{children:"Status"}),e("th",{children:":"}),e("td",{children:t.status})]})]})})}),e("div",{className:`mt-3 ${n=="no_image"?"hidden":"block"}`,children:e("img",{src:`/${t.image}`,className:"rounded-md",alt:"..."})})]})},A=({length:a=1})=>{const t=Array.from({length:a},(n,l)=>l+1);return r(b,{children:[e("table",{className:"table table-compact w-full",children:e("tbody",{children:t.map(n=>r("tr",{className:"flex flex-row justify-center",children:[e("td",{children:e("div",{className:"h-4 w-28 md:w-40 bg-slate-400/70 rounded-lg animate-pulse"})}),e("td",{children:":"}),e("td",{children:e("div",{className:"h-4 w-28 md:w-40 bg-slate-400/70 rounded-lg animate-pulse"})})]},n))})}),e("div",{className:" my-3 p-2 animate-pulse",children:e("div",{className:"h-48 w-full rounded-lg  bg-slate-300"})})]})},F=()=>{const[a,t]=m.exports.useState(!1),[n,l]=m.exports.useState(null),[i,s]=m.exports.useState(""),[f,y]=m.exports.useState(""),x=async()=>{var u,p;if(s(""),!f){s("Masukkan nomor register tanda terima anda.");return}l(null),t(!0);let d=null;const o=await JSON.parse(window.localStorage.getItem("location"))||null;o&&(d=await N(o.latitude,o.longitude));try{const{data:c}=await k.post(route("client.status.process",{receipt_code:f}),{location:d});l(c)}catch(c){l(null),((u=c==null?void 0:c.response)==null?void 0:u.status)==429?g.error("Error : Terlalu Banyak Permintaan. Silakan coba lagi nanti."):((p=c==null?void 0:c.response)==null?void 0:p.status)==404?g.error("Tanda terima tidak ditemukan!"):g.error("Error : Permintaan tidak dapat dipenuhi. Silahkan coba beberapa saat lagi.")}finally{t(!1),y("")}},N=async(d,o)=>{try{const u=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${d}&lon=${o}`,{data:p}=await k.get(u);return p||null}catch{return!1}};return r(b,{children:[e(M,{}),e(S,{children:e("title",{children:"Cek Status Tanda Terima"})}),e(E,{children:r("div",{className:"text-slate-700 mb-10",children:[e("h1",{className:"font-semibold text-center text-xl uppercase mb-10",children:"Cek status tanda terima"}),r("div",{className:"my-3",children:[e(j,{name:"kode",value:f,handleChange:d=>y(d.target.value),placeHolder:"Masukkan nomor register"}),e("div",{className:"text-sm text-red-500 mt-1 italic",children:i}),e(T,{processing:a,className:"mt-3 w-full  btn-accent",handleClick:x,loading:a,children:"cek Tanda Terima"}),r("div",{className:`${!a&&!n?"hidden":"block"} my-7`,children:[e("div",{className:"divider mb-7 font-semibold",children:"DETAIL TANDA TERIMA"}),r("div",{className:"",children:[a&&e(A,{length:9}),n&&e(_,{...n})]}),e("div",{className:"divider font-semibold",children:"Hubungi Kami"}),r("div",{className:"flex gap-5 justify-center my-7",children:[e("div",{className:"w-14 h-14 rounded-full bg-stone-500 flex justify-center items-center shadow",children:e("a",{href:"tel:08116407788",children:e(L,{className:"  text-white text-2xl cursor-pointer "})})}),e("div",{className:"w-14 h-14 rounded-full bg-green-600 flex justify-center items-center shadow",children:e("a",{href:"https://wa.me/628116407788",target:"_blank",children:e(P,{className:"  text-white  text-2xl  cursor-pointer"})})})]})]})]})]})})]})};export{F as default};
