import{r as h,j as l,a as r,u as te,F as T,L as G,b as ae,H as re}from"./app.b2060d12.js";import{_ as C,a as ie,S as ne,M as oe}from"./Main.61d9306c.js";import{p as le,g as se,c as ce}from"./Helper.78819a5b.js";import{P as s,t as m}from"./Alert.34a30928.js";import{L as J}from"./Label.df7ec2a5.js";import{T as de}from"./TextArea.0027f5eb.js";import{B as Q}from"./Button.21b9be17.js";import{l as O}from"./lodash.f9a43a07.js";import{_ as he,c as K,v as pe,a as U,g as ue,b as me,u as ge,S as ve}from"./useStateManager-68425271.esm.01bae5c4.js";import{a as X}from"./index.fefb1b11.js";import{f as fe}from"./index.dbcb883f.js";import{i as be}from"./index.7f05af33.js";import{I as xe}from"./info-circle-fill.a7fbc446.js";import{W as we}from"./whatsapp.9ab3ec02.js";import"./axios.cd6af229.js";var ye=["color","size","title"];function Oe(e,n){if(e==null)return{};var o=ke(e,n),t,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],!(n.indexOf(t)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,t)||(o[t]=e[t]))}return o}function ke(e,n){if(e==null)return{};var o={},t=Object.keys(e),a,i;for(i=0;i<t.length;i++)a=t[i],!(n.indexOf(a)>=0)&&(o[a]=e[a]);return o}var $=h.exports.forwardRef(function(e,n){var o=e.color,t=e.size,a=e.title,i=Oe(e,ye);return l("svg",{ref:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:t,height:t,fill:o,...i,children:[a?r("title",{children:a}):null,r("path",{d:"M5.5 4a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 .5-.5v-5a.5.5 0 0 0-.5-.5h-5zm1 7a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3z"}),r("path",{d:"M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"}),r("path",{d:"M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"})]})});$.propTypes={color:s.string,size:s.oneOfType([s.string,s.number]),title:s.string};$.defaultProps={color:"currentColor",size:"1em",title:null};var Ne=$,Pe=["color","size","title"];function ze(e,n){if(e==null)return{};var o=Ce(e,n),t,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],!(n.indexOf(t)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,t)||(o[t]=e[t]))}return o}function Ce(e,n){if(e==null)return{};var o={},t=Object.keys(e),a,i;for(i=0;i<t.length;i++)a=t[i],!(n.indexOf(a)>=0)&&(o[a]=e[a]);return o}var L=h.exports.forwardRef(function(e,n){var o=e.color,t=e.size,a=e.title,i=ze(e,Pe);return l("svg",{ref:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:t,height:t,fill:o,...i,children:[a?r("title",{children:a}):null,r("path",{fillRule:"evenodd",d:"M10.854 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 8.793l2.646-2.647a.5.5 0 0 1 .708 0z"}),r("path",{d:"M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"}),r("path",{d:"M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"})]})});L.propTypes={color:s.string,size:s.oneOfType([s.string,s.number]),title:s.string};L.defaultProps={color:"currentColor",size:"1em",title:null};var je=L,Te=["color","size","title"];function $e(e,n){if(e==null)return{};var o=Le(e,n),t,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],!(n.indexOf(t)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,t)||(o[t]=e[t]))}return o}function Le(e,n){if(e==null)return{};var o={},t=Object.keys(e),a,i;for(i=0;i<t.length;i++)a=t[i],!(n.indexOf(a)>=0)&&(o[a]=e[a]);return o}var H=h.exports.forwardRef(function(e,n){var o=e.color,t=e.size,a=e.title,i=$e(e,Te);return l("svg",{ref:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:t,height:t,fill:o,...i,children:[a?r("title",{children:a}):null,r("path",{d:"M5 0h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2 2 2 0 0 1-2 2H3a2 2 0 0 1-2-2h1a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1H1a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v9a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1H3a2 2 0 0 1 2-2z"}),r("path",{d:"M1 6v-.5a.5.5 0 0 1 1 0V6h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V9h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 2.5v.5H.5a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1H2v-.5a.5.5 0 0 0-1 0z"})]})});H.propTypes={color:s.string,size:s.oneOfType([s.string,s.number]),title:s.string};H.defaultProps={color:"currentColor",size:"1em",title:null};var He=H,Se=["color","size","title"];function Me(e,n){if(e==null)return{};var o=Ve(e,n),t,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],!(n.indexOf(t)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,t)||(o[t]=e[t]))}return o}function Ve(e,n){if(e==null)return{};var o={},t=Object.keys(e),a,i;for(i=0;i<t.length;i++)a=t[i],!(n.indexOf(a)>=0)&&(o[a]=e[a]);return o}var S=h.exports.forwardRef(function(e,n){var o=e.color,t=e.size,a=e.title,i=Me(e,Se);return l("svg",{ref:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:t,height:t,fill:o,...i,children:[a?r("title",{children:a}):null,r("path",{d:"M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm4.5 0a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zM8 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm5 2.755C12.146 12.825 10.623 12 8 12s-4.146.826-5 1.755V14a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-.245z"})]})});S.propTypes={color:s.string,size:s.oneOfType([s.string,s.number]),title:s.string};S.defaultProps={color:"currentColor",size:"1em",title:null};var Be=S,_e=["color","size","title"];function We(e,n){if(e==null)return{};var o=Fe(e,n),t,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],!(n.indexOf(t)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,t)||(o[t]=e[t]))}return o}function Fe(e,n){if(e==null)return{};var o={},t=Object.keys(e),a,i;for(i=0;i<t.length;i++)a=t[i],!(n.indexOf(a)>=0)&&(o[a]=e[a]);return o}var M=h.exports.forwardRef(function(e,n){var o=e.color,t=e.size,a=e.title,i=We(e,_e);return l("svg",{ref:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:t,height:t,fill:o,...i,children:[a?r("title",{children:a}):null,r("path",{d:"M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"})]})});M.propTypes={color:s.string,size:s.oneOfType([s.string,s.number]),title:s.string};M.defaultProps={color:"currentColor",size:"1em",title:null};var Ae=M;function k({title:e,subtitle:n,children:o,className:t="bg-white"}){return l("div",{className:"card drop-shadow-lg relative mx-2 my-3 w-72 md:w-96 dark:bg-gradient-to-br dark:from-slate-300 dark:to-slate-600 "+t,children:[l("div",{className:"card-body text-gray-500 ",children:[r("div",{className:"card-title font-bold text-4xl ",children:e}),r("div",{className:"z-10",children:n})]}),r("div",{className:"absolute bottom-5 right-2",children:o})]})}var Ie=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],q=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=String(n).toLowerCase(),i=String(t.getOptionValue(o)).toLowerCase(),g=String(t.getOptionLabel(o)).toLowerCase();return i===a||g===a},j={formatCreateLabel:function(n){return'Create "'.concat(n,'"')},isValidNewOption:function(n,o,t,a){return!(!n||o.some(function(i){return q(n,i,a)})||t.some(function(i){return q(n,i,a)}))},getNewOptionData:function(n,o){return{label:o,value:n,__isNew__:!0}}};function Re(e){var n=e.allowCreateWhileLoading,o=n===void 0?!1:n,t=e.createOptionPosition,a=t===void 0?"last":t,i=e.formatCreateLabel,g=i===void 0?j.formatCreateLabel:i,c=e.isValidNewOption,d=c===void 0?j.isValidNewOption:c,V=e.getNewOptionData,x=V===void 0?j.getNewOptionData:V,N=e.onCreateOption,B=e.options,v=B===void 0?[]:B,w=e.onChange,p=he(e,Ie),_=p.getOptionValue,W=_===void 0?ue:_,F=p.getOptionLabel,A=F===void 0?me:F,u=p.inputValue,I=p.isLoading,R=p.isMulti,y=p.value,D=p.name,f=h.exports.useMemo(function(){return d(u,K(y),v,{getOptionValue:W,getOptionLabel:A})?x(u,g(u)):void 0},[g,x,A,W,u,d,v,y]),Y=h.exports.useMemo(function(){return(o||!I)&&f?a==="first"?[f].concat(C(v)):[].concat(C(v),[f]):v},[o,a,I,f,v]),Z=h.exports.useCallback(function(b,P){if(P.action!=="select-option")return w(b,P);var E=Array.isArray(b)?b:[b];if(E[E.length-1]===f){if(N)N(u);else{var z=x(u,u),ee={action:"create-option",name:D,option:z};w(pe(R,[].concat(C(K(y)),[z]),z),ee)}return}w(b,P)},[x,u,R,D,f,N,w,y]);return U(U({},p),{},{options:Y,onChange:Z})}var De=h.exports.forwardRef(function(e,n){var o=ge(e),t=Re(o);return h.exports.createElement(ve,ie({ref:n},t))});function Ee({customers:e}){const{data:n,setData:o,reset:t}=te({phone:"",text:""}),[a,i]=h.exports.useState(!1),g=d=>{o({...n,[d.target.name]:d.target.value})},c=()=>{if(O.exports.isEmpty(n.phone)){m.info("Masukkan no tujuan...");return}else if(O.exports.isEmpty(n.text)){m.info("Masukkan isi pesan");return}else if(!O.exports.isNumber(O.exports.toNumber(n.phone))){m.info("No. Tujuan tidak valid");return}i(!0),X.post(route("whatsapp.sendMessage"),{to:le(n.phone),text:n.text}).then(({data:d})=>{m.success("Pesan berhasil dikirim..."),t()}).catch(()=>{m.error("Pesan gagal dikirim. silahkan coba lagi.")}).finally(()=>{i(!1)})};return r("div",{className:"card bg-white dark:bg-slate-900 shadow-md",children:l("div",{className:"card-body py-9 px-5",children:[r("div",{className:"card-title text-slate-600",children:"Kirim Whatsapp"}),l("div",{children:[r(J,{children:"No. Tujuan"}),r(De,{isClearable:!0,options:e,noOptionsMessage:()=>"Tidak ada pilihan",placeholder:"Pilih Tujuan...",onChange:d=>o({...n,phone:d.value}),formatCreateLabel:d=>"[ Tambah Baru ...] "+d})]}),l("div",{className:"",children:[r(J,{children:"Pesan"}),r(de,{name:"text",value:n.text,className:"textarea-bordered h-48",handleChange:g,placeHolder:"Masukkan pesan whatsapp yang akan dikirim"})]}),r("div",{className:"text-right mt-2",children:r(Q,{handleClick:c,type:"button",className:"btn-success",processing:a,children:"Kirim"})})]})})}const Je=({data:e,processing:n,handleClick:o})=>r(T,{children:e.receipt_status.length?l(T,{children:[r("div",{className:"p-3 dark:bg-teal-700 bg-teal-500 rounded-t-lg text-white font-semibold",children:"List TTB Selesai"}),r("div",{className:"overflow-scroll  rounded-b-lg",children:e.receipt_status.map(t=>l("div",{tabIndex:0,className:"collapse  collapse-arrow",children:[r("input",{type:"checkbox",className:"peer"}),l("div",{className:"collapse-title dark:bg-slate-700 bg-white text-black-content peer-checked:dark:bg-slate-800 peer-checked:bg-amber-200 peer-checked:text-amber-200-content",children:["No. Register : ",t.receipt_code]}),l("div",{className:"collapse-content dark:bg-slate-600 bg-white text-white-content peer-checked:dark:bg-slate-600 peer-checked:bg-amber-100 peer-checked:text-sky-300-content",children:[r("table",{className:"my-5 text-center w-full table-compact",children:l("tbody",{children:[l("tr",{children:[r("td",{children:"No. TTB"}),r("td",{children:":"}),r("td",{children:t.receipt_number})]}),l("tr",{children:[r("td",{children:"Tgl Masuk"}),r("td",{children:":"}),r("td",{children:fe(new Date(t.delivery_date),"dd LLLL yyyy",{locale:be})})]}),l("tr",{children:[r("td",{children:"Customer"}),r("td",{children:":"}),l("td",{children:[t.customer.name," "]})]}),l("tr",{children:[r("td",{children:"Teknisi"}),r("td",{children:":"}),r("td",{children:t.user.name})]}),l("tr",{children:[r("td",{children:"Status"}),r("td",{children:":"}),r("td",{children:r("div",{className:`badge badge-${t.status=="Berhasil"?"success":"error"}`,children:t.status})})]})]})}),l("div",{className:"text-right",children:[r(G,{href:route("receipt.show",t.receipt_code),className:"btn btn-ghost btn-circle mr-3",children:r(xe,{className:"text-xl text-sky-600"})}),t.customer.whatsapp&&l(Q,{className:"btn-success btn-sm",processing:n,handleClick:()=>o(t),children:[!n&&r(we,{className:"text-xl text-green-700"}),"\xA0\xA0Kirim Pesan"]})]})]})]},t.id))})]}):""}),Ke=()=>{const{data:e,auth:n}=ae().props,[o,t]=h.exports.useState(!1),a=i=>{t(!0);let c=`Selamat ${se()} Bapak/Ibu, Kami informasikan
`;c+=`Tanda Terima atas nama ( *${i.customer.name}* )
`,c+=`No. TTB ( *${i.receipt_number}* )
`,c+=`sudah selesai dan bisa diambil. Status pengerjaan *${i.status}*. 

`,i.status==="Berhasil"&&(c+=`Perbaikan : ${i.repair}
`,c+=`Biaya : Rp. ${ce(i.cost)}

`),c+=`Terima Kasih...\u{1F64F}\u{1F64F}\u{1F64F}

`,c+=`Info Lanjut Hub:
`,c+="\u{1F4F1} HP/WA: 08116407788",X.post(route("whatsapp.sendMessage"),{id:i.customer.whatsapp,message:{text:c}}).then(({data:d})=>{d.success?m.success("Pesan berhasil dikirim..."):m.error("Pesan gagal dikirim...")}).catch(d=>{m.error("Server whastapp down...")}).finally(()=>{t(!1)})};return l(T,{children:[r(re,{children:r("title",{children:"Dashboard"})}),l("div",{className:"py-5 px-3",children:[l("div",{className:"bg-gradient-to-br from-teal-50 via-teal-100 to-teal-300 shadow-md py-4 px-6 h-32 rounded-2xl text-gray-500",children:[r("h3",{children:"Selamat Datang,"}),l("div",{className:"flex items-center justify-between mt-3",children:[l("div",{className:"flex items-center space-x-3",children:[r(Ae,{className:"text-5xl"}),l("h2",{className:"text-xl",children:[n.user.name,l("span",{className:"block text-sm",children:["Anda login sebagai, ",n.user.user_type]})]})]}),l(G,{href:route("receipts.create"),className:"w-11 h-11 flex items-center tooltip tooltip-bottom","data-tip":"Buat TTB baru",children:[r("span",{className:"bg-teal-600 w-9 h-9 absolute rounded-xl animate-ping opacity-100 duration-[2000]"}),r(ne,{className:" relative text-4xl text-teal-700"})]})]})]}),l("div",{className:"carousel carousel-center space-x-4 mt-5",children:[r("div",{className:"carousel-item ",children:r(k,{title:e.receipt_today,subtitle:"TTB BARU",className:" bg-gradient-to-br from-white via-green-100 to-green-300",children:r(je,{className:"text-7xl text-green-500 dark:text-slate-700"})})}),r("div",{className:"carousel-item ",children:r(k,{title:e.receipt_active,subtitle:"TTB AKTIF",className:"bg-gradient-to-br from-white via-sky-100 to-sky-300 ",children:r(Ne,{className:"text-7xl text-sky-500 dark:text-slate-700"})})}),r("div",{className:"carousel-item ",children:r(k,{title:e.receipt_total,subtitle:"TOTAL TTB",className:"bg-gradient-to-br from-white via-violet-100 to-violet-300",children:r(He,{className:"text-7xl text-violet-500 dark:text-slate-700"})})}),r("div",{className:"carousel-item ",children:r(k,{title:e.customer_total,subtitle:"CUSTOMER",className:"bg-gradient-to-br from-white via-amber-100 to-amber-300",children:r(Be,{className:"text-7xl text-amber-500 dark:text-slate-700"})})})]}),r("div",{className:"my-8 shadow-md",children:r(Je,{data:e,processing:o,handleClick:a})}),r("div",{className:"mt-8",children:r(Ee,{customers:e.customers})})]})]})};Ke.layout=e=>r(oe,{auth:e.props.auth,errors:e.props.errors,children:e});export{Ke as default};
