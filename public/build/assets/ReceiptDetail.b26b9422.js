import{r as $,u as q,a as e,j as r,d as F,b as G,H as J}from"./app.92daf56f.js";import{a as _,M as Q}from"./Main.d6b38078.js";import{B as y,a as V,S as W}from"./ButtonIsTaken.b176a291.js";import{T as X}from"./TextArea.86f252c5.js";import{B as T}from"./Button.837fc0e5.js";import{L as I}from"./Label.9204bc4e.js";import{I as L}from"./Input.9a833f1b.js";import{c as P}from"./Helper.d9e24006.js";import{d as Z,g as j,a as ee,f as B}from"./index.dbcb883f.js";import{r as S,t as f,i as D}from"./index.7f05af33.js";import"./axios.40b98a77.js";function ae(a,i){S(2,arguments);var t=f(a),s=f(i),d=t.getTime()-s.getTime();return d<0?-1:d>0?1:d}function z(a,i){if(a==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(a[t]=i[t]);return a}function re(a){return z({},a)}var E=1e3*60,p=60*24,O=p*30,A=p*365;function te(a,i,t){var s,d,u;S(2,arguments);var N=ee(),c=(s=(d=t==null?void 0:t.locale)!==null&&d!==void 0?d:N.locale)!==null&&s!==void 0?s:Z;if(!c.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var h=ae(a,i);if(isNaN(h))throw new RangeError("Invalid time value");var o=z(re(t),{addSuffix:Boolean(t==null?void 0:t.addSuffix),comparison:h}),n,v;h>0?(n=f(i),v=f(a)):(n=f(a),v=f(i));var k=String((u=t==null?void 0:t.roundingMethod)!==null&&u!==void 0?u:"round"),m;if(k==="floor")m=Math.floor;else if(k==="ceil")m=Math.ceil;else if(k==="round")m=Math.round;else throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");var w=v.getTime()-n.getTime(),g=w/E,R=j(v)-j(n),b=(w-R)/E,x=t==null?void 0:t.unit,l;if(x?l=String(x):g<1?l="second":g<60?l="minute":g<p?l="hour":b<O?l="day":b<A?l="month":l="year",l==="second"){var Y=m(w/1e3);return c.formatDistance("xSeconds",Y,o)}else if(l==="minute"){var C=m(g);return c.formatDistance("xMinutes",C,o)}else if(l==="hour"){var U=m(g/60);return c.formatDistance("xHours",U,o)}else if(l==="day"){var H=m(b/p);return c.formatDistance("xDays",H,o)}else if(l==="month"){var M=m(b/O);return M===12&&x!=="month"?c.formatDistance("xYears",1,o):c.formatDistance("xMonths",M,o)}else if(l==="year"){var K=m(b/A);return c.formatDistance("xYears",K,o)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}function ie(a,i){return S(1,arguments),te(a,Date.now(),i)}function ne({receipt:a}){const[i,t]=$.exports.useState(!0),{data:s,setData:d,patch:u,processing:N}=q({id:a.id,repair:a.repair||"",cost:P(a.cost)||"",description:a.description||""}),c=()=>{F.Inertia.reload(),t(n=>!n)},h=n=>{d(n.target.name,n.target.name=="cost"?P(n.target.value.replace(/\D/g,"")):n.target.value)},o=()=>{u(route("receipts"),{preserveScroll:!0,onSuccess:()=>{t(!0)}})};return e("div",{children:e("div",{className:"card bg-base-100 rounded-md shadow-md mt-10 ",children:r("div",{className:"card-body p-4",children:[r("div",{children:[e(I,{children:"Perbaikan"}),e(L,{type:"text",name:"repair",value:s.repair,placeHolder:"Perbaikan atau penanganan",disabled:i,handleChange:h})]}),r("div",{children:[e(I,{children:"Biaya"}),e(L,{type:"text",name:"cost",value:s.cost,placeHolder:"Biaya perbaikan",disabled:i,handleChange:h})]}),e("h3",{className:"-mb-2 mt-3",children:"Keterangan"}),e("p",{className:"text-sm text-slate-400 italic mb-3",children:"Keterangan tidak bisa diubah jika barang sudah diambil."}),e(X,{disable:i,name:"description",value:s.description,handleChange:n=>h(n)}),!a.isTaken&&e("div",{className:"mt-3 flex justify-end",children:i?e(T,{className:"w-30 btn-sm",handleClick:c,children:"EDIT"}):r("div",{className:"flex gap-2",children:[e(T,{className:"w-30 btn-sm btn-error",handleClick:c,children:"batal"}),e(T,{className:"w-30 btn-sm btn-success",handleClick:o,processing:N,children:"SIMPAN"})]})})]})})})}const le=()=>{const{receipt:a,processing:i,auth:t}=G().props,s=d=>`${ie(new Date(d),{locale:D})} yang lalu`;return r("div",{className:"mt-10 mx-3",children:[e(J,{title:"TTB Detail"}),e("div",{className:"avatar flex justify-center",children:e("div",{className:"w-1/2 md:w-1/3 lg:w-1/5 rounded-full border-white border-4 shadow-lg",children:e("a",{href:"/"+a.image,target:"_blank",children:e("img",{src:"/"+a.image,alt:a.image})})})}),a.status==="Pending"&&r("div",{className:"alert shadow-md mt-10 flex flex-col",children:[e("h2",{className:"block",children:"Tanda Terima ini belum ditangani"}),e(y,{variant:"primary",data:{id:a.id,status:"proses",handle_by:t.user.name},disable:i,children:"TANGANI Sekarang"})]}),!a.isTaken&&a.status!="Pending"&&a.status!="Proses"?r("div",{className:"alert shadow-md mt-10 flex flex-col",children:[e("h2",{className:"block",children:"Ubah status ttb menjadi sudah diambil ?"}),e(V,{id:a.id})]}):"",a.status==="Proses"&&r("div",{className:"mt-10 flex justify-between items-center alert shadow-md ",children:[e("div",{children:e("h2",{children:"Status Pengerjaan :"})}),r("div",{className:"",children:[e("a",{href:"#modal-gagal",className:"btn btn-sm btn-error shadow-md",children:"gagal"}),e("a",{href:"#modal-sukses",className:"btn btn-sm btn-success shadow-md",children:"Berhasil"}),r(_,{id:"modal-gagal",title:"Perhatian!",message:"Yakin ingin merubah status pengerjaan Batal / Gagal ?",children:[e("a",{href:"#",className:"btn btn-sm",children:"tidak"}),e(y,{className:"block shadow-md",children:"Yakin",data:{id:a.id,status:"gagal"}})]}),r(_,{id:"modal-sukses",title:"Perhatian!",message:"Yakin ingin merubah status pengerjaan Sukses / Berhasil ?",children:[e("a",{href:"#",className:"btn btn-sm",children:"tidak"}),e(y,{className:"block shadow-md",children:"Yakin",data:{id:a.id,status:"berhasil"}})]})]})]}),r("div",{className:"mt-8",children:[e("div",{className:"overflow-x-scroll",children:e("table",{className:"table text-left table-zebra table-compact  w-full rounded-lg shadow-md",children:r("tbody",{className:"",children:[r("tr",{children:[e("td",{children:"No Kartu "}),e("td",{children:":"}),r("td",{className:"font-semibold",children:[a.receipt_number," - ",r("a",{href:`/images/ttb/ttb_${a.receipt_code}.png`,target:"_blank",className:"tooltip tooltip-bottom text-sky-600","data-tip":"Kartu Tanda Terima Barang",children:["( ",a.receipt_code," )"]})]})]}),r("tr",{children:[e("td",{children:"Tanggal Masuk"}),e("td",{children:":"}),r("td",{children:[B(new Date(a.delivery_date),"dd LLLL yyyy",{locale:D})," ",e("br",{})," ",r("span",{className:"italic text-slate-500",children:["( ",s(a.delivery_date)," )"]})]})]}),a.isTaken&&r("tr",{children:[e("td",{children:"Tanggal Ambil"}),e("td",{children:":"}),r("td",{children:[B(new Date(a.pickup_date),"dd LLLL yyyy",{locale:D}),e("br",{}),r("span",{className:"italic text-slate-500",children:["( ",s(a.pickup_date)," )"]})]})]}),r("tr",{children:[e("td",{children:"Customer"}),e("td",{children:":"}),e("td",{className:"hover:bg-blue-100",children:e("a",{href:"",children:a.customer.name})})]}),r("tr",{children:[e("td",{children:"Penerima"}),e("td",{children:":"}),e("td",{className:"capitalize",children:a.user.name})]}),a.status!="Pending"&&r("tr",{children:[e("td",{children:"Teknisi"}),e("td",{children:":"}),e("td",{children:a.handle_by})]}),r("tr",{children:[e("td",{children:"Barang"}),e("td",{children:":"}),e("td",{children:r("p",{className:"capitalize",children:[a.category," - ",a.barang]})})]}),r("tr",{children:[e("td",{children:"Kelengkapan"}),e("td",{children:":"}),e("td",{children:a.kelengkapan?a.kelengkapan.join(" | "):"Tidak ada"})]}),r("tr",{children:[e("td",{children:"Kerusakan"}),e("td",{children:":"}),e("td",{children:a.kerusakan})]}),r("tr",{children:[e("td",{children:"Status "}),e("td",{children:":"}),e("td",{children:r("div",{className:"flex gap-2",children:[e(W,{status:a.status,className:"rounded-full px-3 py-1"}),a.isTaken&&e("div",{className:"rounded-full px-3 py-1 bg-success",children:"Sudah Diambil"})]})})]})]})})}),e(ne,{receipt:a})]})]})};le.layout=a=>e(Q,{auth:a.props.auth,children:a,menu:!1,href:route("receipts")});export{le as default};
