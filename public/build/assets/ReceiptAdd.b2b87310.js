import{u as T,r as h,j as l,a as e,H as B,L as K}from"./app.6232fdb8.js";import{M as H}from"./Main.bcca0eca.js";import{I as o}from"./Input.94a16f79.js";import{B as M}from"./Button.9a9643f6.js";import{a as m,S as I,I as L}from"./ImageUpload.fb212240.js";import{L as i}from"./Label.36ebe144.js";import{T as U}from"./TextArea.169801a6.js";import"./useStateManager-68425271.esm.0bfa1b5e.js";const A=({customers:d,auth:p,user:b})=>{const g=[{label:"Printer",value:"Printer"},{label:"Cartrigde",value:"Cartridge"},{label:"Toner",value:"Toner"}],{data:t,setData:s,post:v,errors:r,processing:k}=T({receipt_number:"",customer_id:"",kelengkapan:"",kerusakan:"",description:"",category:"printer",barang:"",handle_by:"",photo:null}),[f,j]=h.exports.useState([{label:"Kabel USB",value:"Kabel_usb"},{label:"Kabel Listrik",value:"kabel_listrik"},{label:"Kotak",value:"kotak"}]),[N,u]=h.exports.useState({image_src:"",image_data:""}),c=a=>{s(a.target.name,a.target.type==="checkbox"?a.target.checked:a.target.value)},_=a=>{let n=a.target.files[0];u({image_src:URL.createObjectURL(n),image_data:n}),s("photo",n)};function y(){u({image_src:"",image_data:""})}function x(a){let n=[];a.map(S=>{n.push(S.label)}),s("kelengkapan",n)}function C(a){a.preventDefault(),v(route("receipts"),{preserveScroll:!0})}return l("div",{children:[e(B,{title:"Tambah TTB Baru"}),e("div",{className:"bg-slate-300 p-4",children:e("h2",{className:"font-semibold text-slate-600",children:"BUAT TTB BARU"})}),e("form",{onSubmit:C,children:l("div",{className:"m-4 lg:mx-64",children:[l("div",{className:"flex gap-4",children:[l("div",{className:"flex-none w-1/3",children:[e(i,{children:"Nomor Kartu"}),e(o,{type:"number",name:"receipt_number",className:r.receipt_number&&"input-error",handleChange:c,value:t.receipt_number}),r.receipt_number&&e("div",{className:"invalid-feedback",children:r.receipt_number})]}),l("div",{className:"flex-1",children:[l(i,{children:["Customer - ",e(K,{href:route("customers.create"),className:"font-semibold text-blue-700 italic",only:["customers"],data:{history:"receipts"},children:"Tambah"})]}),e(m,{closeMenuOnSelect:!0,option:d,onHandleChange:a=>s({...t,customer_id:a.value})}),r.customer_id&&e("div",{className:"invalid-feedback -mb-3",children:r.customer_id})]})]}),l("div",{className:"flex gap-3 my-2",children:[l("div",{className:"w-1/3",children:[e(i,{children:"Kategori"}),e(I,{name:"category",handleChange:c,children:g.map((a,n)=>e("option",{value:a.value,children:a.label},n))})]}),l("div",{className:"flex-1",children:[e(i,{children:"Nama / Tipe Barang"}),e(o,{value:t.barang,name:"barang",handleChange:c,placeHolder:"Masukkan nama / tipe barang ",className:r.barang&&"input-error"}),r.barang&&e("div",{className:"invalid-feedback",children:r.barang})]})]}),p.user.user_type=="kasir"&&l("div",{children:[e(i,{children:"Teknisi"}),e(m,{closeMenuOnSelect:!0,option:b,onHandleChange:a=>s({...t,handle_by:a.value})}),r.handleBy&&e("div",{className:"invalid-feedback",children:r.handleBy})]}),l("div",{className:"my-2",children:[e(i,{children:"Kelengkapan"}),e(m,{option:f,isMulti:!0,onHandleChange:x})]}),l("div",{className:"my-2",children:[e(i,{children:"Kerusakan"}),e(o,{name:"kerusakan",value:t.kerusakan,handleChange:c,className:r.kerusakan&&"input-error"}),r.kerusakan&&e("div",{className:"invalid-feedback",children:r.kerusakan})]}),l("div",{children:[e(i,{children:"Keterangan"}),e(U,{handleChange:c,name:"description",value:t.description})]}),l("div",{className:"relative mt-5",children:[e(L,{handleChange:_,src:N.image_src,onclick:y}),r.photo&&e("div",{className:"invalid-feedback absolute -bottom-4",children:r.photo})]}),e("div",{className:"mt-10",children:e(M,{type:"submit",className:"btn-success btn-block shadow hover:bg-green-300",processing:k,children:"SIMPAN"})})]})})]})};A.layout=d=>e(H,{auth:d.props.auth,children:d,href:route("receipts"),menu:!1});export{A as default};
