import{r as d,j as l,a as r,u as Y,b as Z,F as ee,H as te,L as ae}from"./app.9963eaa9.js";import{P as s,t as m,W as re,M as ie}from"./Main.4009c7c4.js";import{p as ne,g as oe}from"./Helper.d9e24006.js";import{B as U}from"./Button.6619e8c6.js";import{L as R}from"./Label.c9d32a8e.js";import{T as se}from"./TextArea.eb853b11.js";import{l as y}from"./lodash.c7320667.js";import{_ as le,c as F,a as z,v as ce,b as K,g as de,d as pe,u as he,S as ue,e as me}from"./useStateManager-68425271.esm.2b6d2779.js";import{a as G}from"./index.5220e4e6.js";import{f as ge}from"./index.dbcb883f.js";import{i as ve}from"./index.7f05af33.js";import{I as fe}from"./info-circle-fill.5e85150d.js";import"./axios.40b98a77.js";var be=["color","size","title"];function xe(e,i){if(e==null)return{};var o=Oe(e,i),a,t;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)a=n[t],!(i.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,a)||(o[a]=e[a]))}return o}function Oe(e,i){if(e==null)return{};var o={},a=Object.keys(e),t,n;for(n=0;n<a.length;n++)t=a[n],!(i.indexOf(t)>=0)&&(o[t]=e[t]);return o}var T=d.exports.forwardRef(function(e,i){var o=e.color,a=e.size,t=e.title,n=xe(e,be);return l("svg",{ref:i,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:a,height:a,fill:o,...n,children:[t?r("title",{children:t}):null,r("path",{d:"M5.5 4a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 .5-.5v-5a.5.5 0 0 0-.5-.5h-5zm1 7a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3z"}),r("path",{d:"M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"}),r("path",{d:"M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"})]})});T.propTypes={color:s.string,size:s.oneOfType([s.string,s.number]),title:s.string};T.defaultProps={color:"currentColor",size:"1em",title:null};var we=T,ye=["color","size","title"];function Ne(e,i){if(e==null)return{};var o=Ce(e,i),a,t;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)a=n[t],!(i.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,a)||(o[a]=e[a]))}return o}function Ce(e,i){if(e==null)return{};var o={},a=Object.keys(e),t,n;for(n=0;n<a.length;n++)t=a[n],!(i.indexOf(t)>=0)&&(o[t]=e[t]);return o}var j=d.exports.forwardRef(function(e,i){var o=e.color,a=e.size,t=e.title,n=Ne(e,ye);return l("svg",{ref:i,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:a,height:a,fill:o,...n,children:[t?r("title",{children:t}):null,r("path",{fillRule:"evenodd",d:"M10.854 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 8.793l2.646-2.647a.5.5 0 0 1 .708 0z"}),r("path",{d:"M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"}),r("path",{d:"M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"})]})});j.propTypes={color:s.string,size:s.oneOfType([s.string,s.number]),title:s.string};j.defaultProps={color:"currentColor",size:"1em",title:null};var ke=j,Pe=["color","size","title"];function ze(e,i){if(e==null)return{};var o=Le(e,i),a,t;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)a=n[t],!(i.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,a)||(o[a]=e[a]))}return o}function Le(e,i){if(e==null)return{};var o={},a=Object.keys(e),t,n;for(n=0;n<a.length;n++)t=a[n],!(i.indexOf(t)>=0)&&(o[t]=e[t]);return o}var $=d.exports.forwardRef(function(e,i){var o=e.color,a=e.size,t=e.title,n=ze(e,Pe);return l("svg",{ref:i,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:a,height:a,fill:o,...n,children:[t?r("title",{children:t}):null,r("path",{d:"M5 0h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2 2 2 0 0 1-2 2H3a2 2 0 0 1-2-2h1a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1H1a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v9a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1H3a2 2 0 0 1 2-2z"}),r("path",{d:"M1 6v-.5a.5.5 0 0 1 1 0V6h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V9h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 2.5v.5H.5a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1H2v-.5a.5.5 0 0 0-1 0z"})]})});$.propTypes={color:s.string,size:s.oneOfType([s.string,s.number]),title:s.string};$.defaultProps={color:"currentColor",size:"1em",title:null};var Te=$,je=["color","size","title"];function $e(e,i){if(e==null)return{};var o=Se(e,i),a,t;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)a=n[t],!(i.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,a)||(o[a]=e[a]))}return o}function Se(e,i){if(e==null)return{};var o={},a=Object.keys(e),t,n;for(n=0;n<a.length;n++)t=a[n],!(i.indexOf(t)>=0)&&(o[t]=e[t]);return o}var S=d.exports.forwardRef(function(e,i){var o=e.color,a=e.size,t=e.title,n=$e(e,je);return l("svg",{ref:i,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:a,height:a,fill:o,...n,children:[t?r("title",{children:t}):null,r("path",{d:"M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm4.5 0a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zM8 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm5 2.755C12.146 12.825 10.623 12 8 12s-4.146.826-5 1.755V14a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-.245z"})]})});S.propTypes={color:s.string,size:s.oneOfType([s.string,s.number]),title:s.string};S.defaultProps={color:"currentColor",size:"1em",title:null};var He=S;function N({title:e,subtitle:i,children:o,className:a="bg-white"}){return l("div",{className:"card drop-shadow-lg relative w-72 md:w-96 dark:bg-gradient-to-br dark:from-slate-300 dark:to-slate-600 "+a,children:[l("div",{className:"card-body text-gray-500",children:[r("div",{className:"card-title font-bold text-4xl ",children:e}),r("div",{className:"z-10",children:i})]}),r("div",{className:"absolute bottom-5 right-2",children:o})]})}var Ve=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],J=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,t=String(i).toLowerCase(),n=String(a.getOptionValue(o)).toLowerCase(),p=String(a.getOptionLabel(o)).toLowerCase();return n===t||p===t},L={formatCreateLabel:function(i){return'Create "'.concat(i,'"')},isValidNewOption:function(i,o,a,t){return!(!i||o.some(function(n){return J(i,n,t)})||a.some(function(n){return J(i,n,t)}))},getNewOptionData:function(i,o){return{label:o,value:i,__isNew__:!0}}};function Me(e){var i=e.allowCreateWhileLoading,o=i===void 0?!1:i,a=e.createOptionPosition,t=a===void 0?"last":a,n=e.formatCreateLabel,p=n===void 0?L.formatCreateLabel:n,g=e.isValidNewOption,c=g===void 0?L.isValidNewOption:g,H=e.getNewOptionData,x=H===void 0?L.getNewOptionData:H,C=e.onCreateOption,V=e.options,v=V===void 0?[]:V,O=e.onChange,h=le(e,Ve),M=h.getOptionValue,_=M===void 0?de:M,W=h.getOptionLabel,B=W===void 0?pe:W,u=h.inputValue,A=h.isLoading,E=h.isMulti,w=h.value,I=h.name,f=d.exports.useMemo(function(){return c(u,F(w),v,{getOptionValue:_,getOptionLabel:B})?x(u,p(u)):void 0},[p,x,B,_,u,c,v,w]),q=d.exports.useMemo(function(){return(o||!A)&&f?t==="first"?[f].concat(z(v)):[].concat(z(v),[f]):v},[o,t,A,f,v]),Q=d.exports.useCallback(function(b,k){if(k.action!=="select-option")return O(b,k);var D=Array.isArray(b)?b:[b];if(D[D.length-1]===f){if(C)C(u);else{var P=x(u,u),X={action:"create-option",name:I,option:P};O(ce(E,[].concat(z(F(w)),[P]),P),X)}return}O(b,k)},[x,u,E,I,f,C,O,w]);return K(K({},h),{},{options:q,onChange:Q})}var _e=d.exports.forwardRef(function(e,i){var o=he(e),a=Me(o);return d.exports.createElement(ue,me({ref:i},a))});function We({customers:e}){const{data:i,setData:o,reset:a}=Y({phone:"",text:""}),[t,n]=d.exports.useState(!1),p=c=>{o({...i,[c.target.name]:c.target.value})},g=()=>{if(y.exports.isEmpty(i.phone)){m.info("Masukkan no tujuan...");return}else if(y.exports.isEmpty(i.text)){m.info("Masukkan isi pesan");return}else if(!y.exports.isNumber(y.exports.toNumber(i.phone))){m.info("No. Tujuan tidak valid");return}n(!0),G.post(route("whatsapp.sendMessage"),{id:ne(i.phone),message:{text:i.text}}).then(({data:c})=>{c.success?(m.success("Pesan berhasil dikirim..."),a()):m.error("Pesan gagal dikirim..."),n(!1)})};return r("div",{className:"card bg-slate-100 dark:bg-slate-900 shadow-md",children:l("div",{className:"card-body p-3",children:[r("div",{className:"card-title text-slate-600",children:"Kirim Whatsapp"}),l("div",{children:[r(R,{children:"No. Tujuan"}),r(_e,{isClearable:!0,options:e,noOptionsMessage:()=>"Tidak ada pilihan",placeholder:"Pilih Tujuan...",onChange:c=>o({...i,phone:c.value}),formatCreateLabel:c=>"[ Tambah Baru ...] "+c})]}),l("div",{className:"",children:[r(R,{children:"Pesan"}),r(se,{name:"text",value:i.text,handleChange:p,placeHolder:""})]}),r("div",{className:"text-right mt-2",children:r(U,{handleClick:g,type:"button",processing:t,children:"Kirim"})})]})})}const Be=()=>{const{data:e}=Z().props,[i,o]=d.exports.useState(!1),a=t=>{o(!0);let p=`Selamat ${oe()}, Kami informasikan bahwa tanda terima atas *${t.customer.name}* sudah selesai.`;G.post(route("whatsapp.sendMessage"),{id:t.customer.whatsapp,message:{text:p}}).then(({data:g})=>{g.success?m.success("Pesan berhasil dikirim..."):m.error("Pesan gagal dikirim..."),o(!1)})};return l(ee,{children:[r(te,{title:"Dashboard"}),l("div",{className:"py-5 px-3",children:[l("div",{className:"carousel carousel-center space-x-4 py-2",children:[r("div",{className:"carousel-item ",children:r(N,{title:e.receipt_today,subtitle:"TTB BARU",className:" bg-gradient-to-br from-white via-green-100 to-green-300",children:r(ke,{className:"text-7xl text-green-500 dark:text-slate-700"})})}),r("div",{className:"carousel-item ",children:r(N,{title:e.receipt_active,subtitle:"TTB AKTIF",className:"bg-gradient-to-br from-white via-sky-100 to-sky-300 ",children:r(we,{className:"text-7xl text-sky-500 dark:text-slate-700"})})}),r("div",{className:"carousel-item ",children:r(N,{title:e.receipt_total,subtitle:"TOTAL TTB",className:"bg-gradient-to-br from-white via-violet-100 to-violet-300",children:r(Te,{className:"text-7xl text-violet-500 dark:text-slate-700"})})}),r("div",{className:"carousel-item ",children:r(N,{title:e.customer_total,subtitle:"CUSTOMER",className:"bg-gradient-to-br from-white via-amber-100 to-amber-300",children:r(He,{className:"text-7xl text-amber-500 dark:text-slate-700"})})})]}),l("div",{className:"my-8",children:[r("h2",{className:"text-md my-3",children:"TTB SELESAI"}),r("div",{className:"overflow-auto",children:l("table",{className:"table w-full",children:[r("thead",{children:l("tr",{children:[r("td",{children:"KODE TTB"}),r("td",{children:"TGL MASUK"}),r("td",{children:"CUSTOMER"}),r("td",{children:"TEKNISI"}),r("td",{children:"STATUS"}),r("td",{className:"text-center",children:"AKSI"})]})}),r("tbody",{children:e.receipt_status.length?e.receipt_status.map((t,n)=>l("tr",{children:[r("td",{children:t.receipt_code}),r("td",{children:ge(new Date(t.delivery_date),"dd LLLL yyyy",{locale:ve})}),r("td",{children:t.customer.name}),r("td",{children:t.handle_by}),r("td",{children:t.status}),l("td",{className:"flex justify-center",children:[r(ae,{href:route("receipt.show",t.receipt_code),className:"btn btn-ghost btn-circle",children:r(fe,{className:"text-xl text-sky-600"})}),t.customer.whatsapp&&r(U,{className:"btn-ghost btn-md btn-circle",processing:i,handleClick:()=>a(t),children:!i&&r(re,{className:"text-xl text-green-700"})})]})]},n)):r("tr",{children:r("td",{colSpan:6,align:"center",children:"Tidak ada data"})})})]})})]}),r("div",{className:"mt-10",children:r(We,{customers:e.customers})})]})]})};Be.layout=e=>r(ie,{auth:e.props.auth,errors:e.props.errors,children:e});export{Be as default};
