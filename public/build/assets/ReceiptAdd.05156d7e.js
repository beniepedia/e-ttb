import{u as T,r as h,j as n,a as e,H as B,L as K}from"./app.e5db22d1.js";import{M as H}from"./Main.06d24812.js";import{I as o}from"./Input.3748a9f7.js";import{B as M}from"./Button.2a1a4f07.js";import{a as m,S as I,I as L}from"./ImageUpload.0dc27f1e.js";import{L as i}from"./Label.fde444ee.js";import{T as U}from"./TextArea.cc88deec.js";import"./useStateManager-68425271.esm.7dc829f0.js";const A=({customers:d,auth:p,user:b})=>{const g=[{label:"Printer",value:"Printer"},{label:"Cartrigde",value:"Cartridge"},{label:"Toner",value:"Toner"}],{data:t,setData:s,post:v,errors:r,processing:k}=T({receipt_number:"",customer_id:"",kelengkapan:"",kerusakan:"",description:"",category:"printer",barang:"",handle_by:"",photo:null}),[f,j]=h.exports.useState([{label:"Kabel USB",value:"Kabel_usb"},{label:"Kabel Listrik",value:"kabel_listrik"},{label:"Kotak",value:"kotak"}]),[N,u]=h.exports.useState({image_src:"",image_data:""}),c=a=>{s(a.target.name,a.target.type==="checkbox"?a.target.checked:a.target.value)},_=a=>{let l=a.target.files[0];u({image_src:URL.createObjectURL(l),image_data:l}),s("photo",l)};function y(){u({image_src:"",image_data:""})}function x(a){let l=[];a.map(S=>{l.push(S.label)}),s("kelengkapan",l)}function C(a){a.preventDefault(),v(route("receipts"),{preserveScroll:!0})}return n("div",{children:[e(B,{title:"Tambah TTB Baru"}),e("div",{className:"bg-slate-300 p-4",children:e("h2",{className:"font-semibold text-slate-600",children:"BUAT TTB BARU"})}),e("form",{onSubmit:C,children:n("div",{className:"m-4",children:[n("div",{className:"flex gap-4",children:[n("div",{className:"flex-none w-1/3",children:[e(i,{children:"Nomor Kartu"}),e(o,{type:"number",name:"receipt_number",className:r.receipt_number&&"input-error",handleChange:c,value:t.receipt_number}),r.receipt_number&&e("div",{className:"invalid-feedback",children:r.receipt_number})]}),n("div",{className:"flex-1",children:[n(i,{children:["Customer - ",e(K,{href:route("customers.create"),className:"font-semibold text-blue-700 italic",only:["customers"],data:{history:"receipts"},children:"Tambah"})]}),e(m,{closeMenuOnSelect:!0,option:d,onHandleChange:a=>s({...t,customer_id:a.value})}),r.customer_id&&e("div",{className:"invalid-feedback -mb-3",children:r.customer_id})]})]}),n("div",{className:"flex gap-3 my-2",children:[n("div",{className:"w-1/3",children:[e(i,{children:"Kategori"}),e(I,{name:"category",handleChange:c,children:g.map((a,l)=>e("option",{value:a.value,children:a.label},l))})]}),n("div",{className:"flex-1",children:[e(i,{children:"Nama / Tipe Barang"}),e(o,{value:t.barang,name:"barang",handleChange:c,placeHolder:"Masukkan nama / tipe barang ",className:r.barang&&"input-error"}),r.barang&&e("div",{className:"invalid-feedback",children:r.barang})]})]}),p.user.user_type=="kasir"&&n("div",{children:[e(i,{children:"Teknisi"}),e(m,{closeMenuOnSelect:!0,option:b,onHandleChange:a=>s({...t,handle_by:a.value})}),r.handleBy&&e("div",{className:"invalid-feedback",children:r.handleBy})]}),n("div",{className:"my-2",children:[e(i,{children:"Kelengkapan"}),e(m,{option:f,isMulti:!0,onHandleChange:x})]}),n("div",{className:"my-2",children:[e(i,{children:"Kerusakan"}),e(o,{name:"kerusakan",value:t.kerusakan,handleChange:c,className:r.kerusakan&&"input-error"}),r.kerusakan&&e("div",{className:"invalid-feedback",children:r.kerusakan})]}),n("div",{children:[e(i,{children:"Keterangan"}),e(U,{handleChange:c,name:"description",value:t.description})]}),n("div",{className:"relative mt-5",children:[e(L,{handleChange:_,src:N.image_src,onclick:y}),r.photo&&e("div",{className:"invalid-feedback absolute -bottom-4",children:r.photo})]}),e("div",{className:"mt-10",children:e(M,{type:"submit",className:"btn-success btn-block shadow hover:bg-green-300",processing:k,children:"SIMPAN"})})]})})]})};A.layout=d=>e(H,{auth:d.props.auth,children:d,href:route("receipts"),menu:!1});export{A as default};
